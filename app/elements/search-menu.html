<dom-module id="search-menu">
  <style>
paper-menu a {
  text-decoration: none;
  color: var(--menu-link-color);
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -ms-flex-direction: row;
  -webkit-flex-direction: row;
  flex-direction: row;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  font-family: 'Roboto', 'Noto', sans-serif;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  font-size: 14px;
  font-weight: 400;
  line-height: 24px;
  min-height: 48px;
  padding: 0px 16px;
}
  </style>
  <template>
    <paper-item>
      <paper-input-container>
        <label is="icon-label"></label>
        <!-- FIXME: bind on-input to do suggestions -->
        <!-- FIXME: how do I set the default on page load? -->
        <input is="iron-input"
               id="textSearch"
               on-change="_textSearch">
      </paper-input-container>
    </paper-item>

    <paper-menu class="list"
                attr-for-selected="data-route"
                selected="{{q}}"
                on-iron-activate="_quickSearch">
      <a data-route="housing" href="/search/housing">Housing</a>
      <a data-route="food" href="/search/food">Food</a>
      <a data-route="financial help" href="/search/financial help">Financial Help</a>
      <a data-route="legal help" href="/search/legal help">Legal Help</a>
      <a data-route="something to do" href="/search/something to do">Something to do</a>
      <a data-route="health" href="/search/health">Health</a>
      <a data-route="job" href="/search/job">Job</a>
    </paper-menu>
  </template>
</dom-module>

<script>
Polymer({
    is: 'search-menu',
    properties: {
        /**
         * search
         *
         * This is the value the user is searching for. It could either be
         * a text string or a quick search.
         */
        search: {
          type: String,
          readOnly: true,
          notify: true
        }
    },

    _textSearch: function(e) {
        this._setSearch(e.target.value);
        page('/search/' + e.target.value);
    },

    _quickSearch: function(e) {
        /* unset the search dialog */
        this.querySelector('#textSearch').bindValue = null;

        this._setSearch(e.detail.item.innerText);
    }
});
</script>
